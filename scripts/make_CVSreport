#!/bin/tcsh

setenv CVSROOT /group/halld/Repositories/cvsroot
set statcvs=/group/halld/Software/ExternalPackages/statcvs/statcvs.jar


# Create directory to hold output
set dir=CVSstats
mkdir -p $dir
cd $dir

# Create a directory for the code and checkout the CVS packages
# into it.
mkdir -p code
cd code
cvs co CVSstats

# remove files we want to ignore such as Postscript files or generated files
rm -f `find . -name "*.ps"`
rm -f `find . -name "*.pdf"`
rm -f src/programs/Simulation/HDGeant/hddsGeant3.F
rm -f src/programs/Simulation/HDGeant/dsolenoid.table
rm -f src/programs/Simulation/HDGeant/hddm_s.c
rm -f src/programs/Simulation/HDGeant/hddm_s.h
rm -f src/programs/Analysis/hddm/hddm_t.c
rm -rf mcroot/html
rm -rf mcroot/cvsOLD
rm -f src/libraries/include/hddm_s.h
rm -f src/libraries/HDDM/hddm_s.c
rm -f src/programs/Analysis/hdview/hdgeant.cc
rm -f src/doc/Doxyfile

# generate CVS log file
cvs log `find . -type f | grep -v CVS | grep "./"` > ../cvs.log

# Run statcvs
cd ..
java -jar $statcvs Hall-D_Software cvs.log code

# Remove source code directory
rm -rf code

