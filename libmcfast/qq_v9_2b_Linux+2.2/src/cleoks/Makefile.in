#
# Makefile - creates libraries. It invokes sub-makefiles Makefile.clutil clutil_d 
# Generated by car2cvs $Revision$ (nk)
#
# $Id$
#
# $Log$
# Revision 1.1  2000/06/19 20:00:10  eugenio
# Initial revision
#
# Revision 1.2  1996/01/15 21:54:41  lkg
# Update to (a) compile routines in runinf and (b) automatically copy files
# from cleoks/runfil subdirectory to the local runfil area
#
# Revision 1.1.1.1  1995/08/01 17:59:24  nk
# Consolidation
#
# Revision 1.7  1995/08/01 02:55:11  nk
# Removed trnfnm. Changed the library name to cleoks
#
# Revision 1.6  1995/08/01 02:07:37  nk
# Removed.
#
# Revision 1.5  1995/07/31  20:33:38  nk
# Files in genutl are copied into c_util, fort_util, string_util, hpux_util,
# time_util, vax_util and unix_util. timee in kernel was also moved into
# time_util.
#
# Revision 1.4  1995/07/31  19:36:33  nk
# Added typscn
#
# Revision 1.3  1995/07/31  18:26:00  nk
# Added ucio.
#
# Revision 1.2  1995/07/31  16:31:56  nk
# Added ntape directory. Moved ntape(mtape) code from nkcl.
#
# Revision 1.1.1.1  1994/10/04  21:54:43  zfiles
# first version of clutil in CVS
#
#

MAKE = gmake
SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
MACHINE = @MACHINE@


prefix = $(word 1,$(CLEO_PREFIX) $(HOME)/dlib)
exec_prefix = $(prefix)
libdir = $(exec_prefix)/lib
vaxsrcdir = $(exec_prefix)/vaxsrc/cleoks
locallib = ../lib
localrunfil = ../runfil
LOCALVAXSRC = ../vaxsrc

SUBNAMES=cleoks


.PHONY:TEST production vaxsrc vaxcom debug clean distclean realclean depend mklib mkrunfil xscript install uninstall TAGS makefiles $(SUBNAMES)
	@

all:: 
	@$(MAKE) makefiles depend mklib production debug mkrunfil xscript TAGS TEMP_DEFS="$(TEMP_DEFS)"

debug production TEST::mklib mkrunfil
	@ 

depend:: 
	@(test -n "$(LIBRARY)" && test -d _$(LIBRARY) && test -f _$(LIBRARY)/pilot.h && \
	grep -v "^\*" _$(LIBRARY)/pilot.h > _$(LIBRARY)/pilot_c.h) || true

mklib:: 
	@test -d $(locallib) || mkdir -p $(locallib)

mkrunfil:: 
	@test -d $(localrunfil) || mkdir -p $(localrunfil)

vaxsrc:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC)

vaxcom:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC);\
	echo $$ >> $(LOCALVAXSRC)/cfl.com

install:: 
	@-(test -d $(LOCALVAXSRC) && (test -d $(vaxsrcdir) || mkdir -p $(vaxsrcdir)) && (cd $(LOCALVAXSRC);cp -f -p -r * $(vaxsrcdir)))||true

distclean::clean
	@

production vaxsrc vaxcom depend clean distclean realclean mklib xscript install uninstall TAGS TEST:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" TEMP_DEFS="$(TEMP_DEFS)"

debug:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" "DEBUG=_g" TEMP_DEFS="$(TEMP_DEFS)"

$(SUBNAMES):: 
	@$(MAKE) -f Makefile.$@ $(TARGET) DEBUG=$(DEBUG) TEMP_DEFS="$(TEMP_DEFS)"

clean::
	@rm -f core

distclean::
	@rm -f Makefile config.status;\
	rm -f -r vaxsrc

realclean::distclean
	@rm -f *~ #*

config.status:configure
	@$(SHELL) config.status --recheck

configure:configure.in
	@cd $(srcdir); autoconf

Makefile:Makefile.in config.status
	@$(SHELL) config.status

lunmgr/Makefile:lunmgr/Makefile.in config.status
	@$(SHELL) config.status

mesrep/Makefile:mesrep/Makefile.in config.status
	@$(SHELL) config.status

Makefile.cleoks:Makefile.cleoks.in config.status
	@$(SHELL) config.status

typscn/Makefile:typscn/Makefile.in config.status
	@$(SHELL) config.status

typscn/typscn/Makefile:typscn/typscn/Makefile.in config.status
	@$(SHELL) config.status

typscn/typsio/Makefile:typscn/typsio/Makefile.in config.status
	@$(SHELL) config.status

typscn/typsio_c/Makefile:typscn/typsio_c/Makefile.in config.status
	@$(SHELL) config.status

typscn/typsub/Makefile:typscn/typsub/Makefile.in config.status
	@$(SHELL) config.status

makefiles:Makefile lunmgr/Makefile mesrep/Makefile Makefile.cleoks typscn/Makefile typscn/typscn/Makefile typscn/typsio/Makefile typscn/typsio_c/Makefile typscn/typsub/Makefile
	@$(MAKE) depend




