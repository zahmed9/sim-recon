#
# Makefile - creates libraries. It invokes sub-makefiles Makefile.korb 
# Generated by car2cvs $Revision$ (nk)
#
# $Id$
#
# $Log$
# Revision 1.1  2000/06/19 20:00:25  eugenio
# Initial revision
#
# Revision 1.1.1.1  1994/11/22  16:57:00  zfiles
# first version of korb in CVS
#
#

MAKE = gmake
SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
MACHINE = @MACHINE@


prefix = $(word 1,$(CLEO_PREFIX) $(HOME)/dlib)
exec_prefix = $(prefix)
libdir = $(exec_prefix)/lib
vaxsrcdir = $(exec_prefix)/vaxsrc/korb
locallib = ../lib
LOCALVAXSRC = ../vaxsrc

SUBNAMES=korb 


.PHONY:TEST production vaxsrc vaxcom debug clean distclean realclean depend mklib install uninstall TAGS makefiles $(SUBNAMES)
	@

all:: 
	@$(MAKE) makefiles depend mklib production debug TAGS TEMP_DEFS="$(TEMP_DEFS)"

debug production TEST::mklib
	@ 

depend:: 
	@(test -n "$(LIBRARY)" && test -d _$(LIBRARY) && test -f _$(LIBRARY)/pilot.h && \
	grep -v "^\*" _$(LIBRARY)/pilot.h > _$(LIBRARY)/pilot_c.h) || true

mklib:: 
	@test -d $(locallib) || mkdir -p $(locallib)

vaxsrc:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC)

vaxcom:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC);\
	echo $$ >> $(LOCALVAXSRC)/cfl.com

install:: 
	@-(test -d $(LOCALVAXSRC) && (test -d $(vaxsrcdir) || mkdir -p $(vaxsrcdir)) && (cd $(LOCALVAXSRC);cp -f -p -r * $(vaxsrcdir)))||true

distclean::clean
	@

production vaxsrc vaxcom depend clean distclean realclean mklib install uninstall TAGS TEST:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" TEMP_DEFS="$(TEMP_DEFS)"

debug:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" "DEBUG=_g" TEMP_DEFS="$(TEMP_DEFS)"

$(SUBNAMES):: 
	@$(MAKE) -f Makefile.$@ $(TARGET) DEBUG=$(DEBUG) TEMP_DEFS="$(TEMP_DEFS)"

clean::
	@rm -f core

distclean::
	@rm -f Makefile config.status;\
	rm -f -r vaxsrc

realclean::distclean
	@rm -f *~ #*

config.status:configure
	@$(SHELL) config.status --recheck

configure:configure.in
	@cd $(srcdir); autoconf

Makefile:Makefile.in config.status
	@$(SHELL) config.status

Makefile.korb:Makefile.korb.in config.status
	@$(SHELL) config.status

loccode/Makefile:loccode/Makefile.in config.status
	@$(SHELL) config.status

dist/Makefile:dist/Makefile.in config.status
	@$(SHELL) config.status

koralhep/Makefile:koralhep/Makefile.in config.status
	@$(SHELL) config.status

korb22/Makefile:korb22/Makefile.in config.status
	@$(SHELL) config.status

tauola/Makefile:tauola/Makefile.in config.status
	@$(SHELL) config.status

formf/Makefile:formf/Makefile.in config.status
	@$(SHELL) config.status

photos/Makefile:photos/Makefile.in config.status
	@$(SHELL) config.status

makefiles:Makefile Makefile.korb loccode/Makefile dist/Makefile koralhep/Makefile korb22/Makefile tauola/Makefile formf/Makefile photos/Makefile 
	@$(MAKE) depend




