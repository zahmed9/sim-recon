#!/bin/sh
#
# boot - script to create makefiles. Generated by car2cvs $Revision$ (nk)
# boot [-f] [--force] [--prefix=path]
#
#
# Accept options if any
#
for arg
do
  if test x$next_prefix = xyes; then prefix=$arg; next_prefix=
  else
    case $arg in
     -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
	prefix=`echo $arg | sed 's/[-a-z_]*=//'` ;;
     -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
	next_prefix=yes ;;
     -f | --force)
	forced=yes ;;
     *) ;;
    esac
  fi
done
D=`dirname $0`
DIR=`cd $D;pwd`
#
# check to see if there is Makefile in the original directory
#
if test -f $DIR/Makefile && test -z "$forced"
then
  echo -n "$DIR/Makefile exists. Clean $DIR and proceed ? [n*/y] "
  read answer
  if test "${answer-n}" = y
  then
    forced=yes
  else
    exit 1
  fi
fi
#
# Clean $DIR
#
if test -f $DIR/Makefile && test $forced
then
  (cd $DIR;gmake distclean)
fi
#
# Create makefiles here
#
if test $prefix;
then
  gmake -f $DIR/Makefile.boot VPATH=$DIR prefix=$prefix
else
  gmake -f $DIR/Makefile.boot VPATH=$DIR
fi

