#
# korb/tauola/Makefile.in - compiles and archives the source code in this directory.
# It is invoked by Makefile.xxxxx in the above directory, where xxxxx is the name of the library.
# Generated by car2cvs $Revision$ (nk)
#
# $Id$
#
# $Log$
# Revision 1.1  2000/06/19 20:00:30  eugenio
# Initial revision
#
# Revision 1.3  1996/03/06 15:08:37  zfiles
# Added : to = shell
#
# Revision 1.2  1994/12/13  14:23:18  zfiles
# Remove double quotes around CLEO_DEFS
#
# Revision 1.1.1.1  1994/11/22  16:57:05  zfiles
# first version of korb in CVS
#
#

MAKE = gmake
SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
MACHINE = @MACHINE@

CPP = @CPP@
ETAGS = etags -a
MAKEDEPEND = @MAKEDEPEND@
FC = @FC@
FFLAGS = @FFLAGS@
OPT_FFLAGS = @OPT_FFLAGS@
DBG_FFLAGS = @DBG_FFLAGS@
ifeq "$(srcdir)" "."
  absrcdir := $(shell pwd)
else
  absrcdir = $(srcdir)
endif

FORTRAN_SOURCES=$(wildcard $(srcdir)/*.F)

NOTDIR_F_SOURCES=$(notdir $(FORTRAN_SOURCES))

OBJS=$(NOTDIR_F_SOURCES:%.F=$(LIBRARY)(%.o))

VAX_FORTRAN_SOURCES=$(NOTDIR_F_SOURCES:%.F=$(LOCALVAXSRC)/%.for)

VAX_COMS := $(NOTDIR_F_SOURCES:.F=.com)

LIBRARY=dummy
ifeq "$(LIBRARY)" "dummy"
  OBJS=
endif
.SUFFIXES: .cdf

.PHONY:dummy production vaxsrc vaxcom debug clean distclean realclean TAGS depend fort_depend c_depend cc_depend
	@

dummy::
	@echo Run Makefile in the parent directory

debug production:$(OBJS)
	@test "$(LIBRARY)" = "dummy" || test "`echo *.o`" = "*.o" || ($(AR) rvs $(LIBRARY) *.o;$(RM) *.o)

vaxsrc:$(VAX_FORTRAN_SOURCES)
	@ 

vaxcom:$(VAX_COMS)
	@ 

clean:
	@rm -f *.o *.bak

distclean:clean
	@rm -f Makefile Makefile.obj

realclean:
	@rm -f *~ #*

TAGS:$(absrcdir)/*[Fch]
	@$(ETAGS) -f $(dir $(LIBRARY))/TAGS.$(LIBRARY_NAME) $(absrcdir)/*[Fch]

depend:fort_depend 
	@test "$(LIBRARY)" != "dummy" || echo Run Makefile in the parent directory

$(LIBRARY)(%.o):%.F
	@$(FC) $(CLEO_DEFS) $(CLEO_FFLAGS) $(FFLAGS) -c $<


$(LOCALVAXSRC)/%.for:%.F ; $(CPP) -DCLEO_VAX $(CLEO_DEFS) $(CLEO_FFLAGS) $(FFLAGS) -c $< | grep -v "^\#" > $@
	@

%.com:%.F ; @echo "$$ @cleo_cfl $* $(shell basename $(srcdir)) $(shell basename $(shell dirname $(srcdir))) $(LIBRARY_NAME) $(CLEO_DEFS)" >> $(LOCALVAXSRC)/cfl.com
	@

fort_depend:$(FORTRAN_SOURCES)
	@test "$(LIBRARY)" = "dummy" || test -z "$(FORTRAN_SOURCES)" || $(MAKEDEPEND) -o.o\) -p$$\(LIBRARY\)\( $(CLEO_DEFS) $(CLEO_FFLAGS) $(FORTRAN_SOURCES)




