#
# qqlib/user/Makefile.obj.in - compiles the source code in this directory.
# It is invoked by Makefile.xxxxx in the above directory.
# Generated by car2cvs $Revision$ (nk)
#
# $Id$
#
# $Log$
# Revision 1.1  2000/06/19 20:00:51  eugenio
# Initial revision
#
# Revision 1.3  1996/03/06 15:11:53  zfiles
# Added : to = shell
#
# Revision 1.2  1994/10/19  20:18:33  zfiles
# Fixed install target.
#
# Revision 1.1.1.1  1994/10/08  02:21:26  zfiles
# first version of qqlib in CVS
#
#

MAKE = gmake
SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
MACHINE = @MACHINE@

CPP = @CPP@
ETAGS = etags -a
MAKEDEPEND = @MAKEDEPEND@
FC = @FC@
FFLAGS = @FFLAGS@
OPT_FFLAGS = @OPT_FFLAGS@
DBG_FFLAGS = @DBG_FFLAGS@

INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@
prefix = $(word 1,$(CLEO_PREFIX) $(HOME)/dlib)
exec_prefix = $(prefix)
libdir = $(exec_prefix)/lib

ifeq "$(srcdir)" "."
  absrcdir := $(shell pwd)
else
  absrcdir = $(srcdir)
endif

FORTRAN_SOURCES=$(wildcard $(srcdir)/*.F)

NOTDIR_F_SOURCES=$(notdir $(FORTRAN_SOURCES))

OBJS=$(NOTDIR_F_SOURCES:%.F=$(OBJDIR)%$(DEBUG).o)

VAX_FORTRAN_SOURCES=$(NOTDIR_F_SOURCES:%.F=$(LOCALVAXSRC)/%.for)

VAX_COMS := $(NOTDIR_F_SOURCES:.F=.com)

LIBRARY=dummy
ifeq "$(LIBRARY)" "dummy"
  OBJS=
endif
.SUFFIXES: .cdf

.PHONY:dummy production vaxsrc vaxcom debug clean distclean realclean depend fort_depend c_depend cc_depend install uninstall TAGS
	@

dummy::
	@echo Run Makefile of the parent directory

production:$(OBJS)
	@ 

vaxsrc:$(VAX_FORTRAN_SOURCES)
	@ 

vaxcom:$(VAX_COMS)
	@ 

debug:$(OBJS)
	@ 

clean:
	@rm -f *.o *.bak

distclean:clean
	@rm -f Makefile Makefile.obj $(OBJS) $(OBJS:%.o=%_g.o)

realclean:
	@rm -f *~ #*

install:
	@for file in $(OBJS); do (test -f $$file && $(INSTALL_DATA) $$file $(libdir))||true;done

uninstall:
	@for file in $(notdir $(OBJS)); do (rm -f $(libdir)/$$file)||true;done

TAGS:$(absrcdir)/*[Fch]
	@$(ETAGS) -f $(dir $(LIBRARY))/TAGS.$(LIBRARY_NAME) $(absrcdir)/*[Fch]

depend:fort_depend 
	@test "$(LIBRARY)" != "dummy" || echo Run Makefile in the parent directory

$(OBJDIR)%$(DEBUG).o:%.F
	@$(FC) $(CLEO_DEFS) $(CLEO_FFLAGS) $(FFLAGS) -c $<
	mv $*.o $@


$(LOCALVAXSRC)/%.for:%.F
	@$(CPP) $(CLEO_DEFS) $(CLEO_FFLAGS) $(FFLAGS) -c $< > $@

%.com::%.F
	@@echo "$$ @cleo_cfor $* $(shell basename $(srcdir)) $(shell basename $(shell dirname $(srcdir))) $(LIBRARY_NAME) $(CLEO_DEFS)" >> $(LOCALVAXSRC)/cfl.com


fort_depend:$(FORTRAN_SOURCES)
	@test -z "$(FORTRAN_SOURCES)" || $(MAKEDEPEND) -f Makefile.obj -o$$\(DEBUG\).o -p$$\(OBJDIR\) "$(CLEO_DEFS)" $(CLEO_FFLAGS) $(FORTRAN_SOURCES)




