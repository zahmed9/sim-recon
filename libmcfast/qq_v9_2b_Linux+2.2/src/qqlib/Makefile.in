#
# Makefile - creates libraries. It invokes sub-makefiles Makefile.qqlib noncleo 
# Generated by car2cvs $Revision$ (nk)
#
# $Id$
#
# $Log$
# Revision 1.1  2000/06/19 20:00:32  eugenio
# Initial revision
#
# Revision 1.2  1994/10/19  16:48:20  zfiles
# Do not build non-cleo library
#
# Revision 1.1.1.1  1994/10/08  02:21:26  zfiles
# first version of qqlib in CVS
#
#

MAKE = gmake
SHELL = /bin/sh
srcdir = @srcdir@
VPATH = @srcdir@
MACHINE = @MACHINE@


prefix = $(word 1,$(CLEO_PREFIX) $(HOME)/dlib)
exec_prefix = $(prefix)
libdir = $(exec_prefix)/lib
vaxsrcdir = $(exec_prefix)/vaxsrc/qqlib
locallib = ../lib
LOCALVAXSRC = ../vaxsrc

SUBNAMES=qqlib


.PHONY:TEST production vaxsrc vaxcom debug clean distclean realclean depend mklib install uninstall TAGS makefiles $(SUBNAMES)
	@

all:: 
	@$(MAKE) makefiles depend mklib production debug TAGS TEMP_DEFS="$(TEMP_DEFS)"

debug production TEST::mklib
	@ 

depend:: 
	@(test -n "$(LIBRARY)" && test -d _$(LIBRARY) && test -f _$(LIBRARY)/pilot.h && \
	grep -v "^\*" _$(LIBRARY)/pilot.h > _$(LIBRARY)/pilot_c.h) || true

mklib:: 
	@test -d $(locallib) || mkdir -p $(locallib)

vaxsrc:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC)

vaxcom:: 
	@test -d $(LOCALVAXSRC) || mkdir -p $(LOCALVAXSRC);\
	echo $$ >> $(LOCALVAXSRC)/cfl.com

install:: 
	@-(test -d $(LOCALVAXSRC) && (test -d $(vaxsrcdir) || mkdir -p $(vaxsrcdir)) && (cd $(LOCALVAXSRC);cp -f -p -r * $(vaxsrcdir)))||true

distclean::clean
	@

production vaxsrc vaxcom depend clean distclean realclean mklib install uninstall TAGS TEST:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" TEMP_DEFS="$(TEMP_DEFS)"

debug:: 
	@test -z "$(SUBNAMES)" || $(MAKE) $(SUBNAMES) "TARGET=$@" "DEBUG=_g" TEMP_DEFS="$(TEMP_DEFS)"

$(SUBNAMES):: 
	@$(MAKE) -f Makefile.$@ $(TARGET) DEBUG=$(DEBUG) TEMP_DEFS="$(TEMP_DEFS)"

clean::
	@rm -f core

distclean::
	@rm -f Makefile config.status;\
	rm -f -r vaxsrc

realclean::distclean
	@rm -f *~ #*

config.status:configure
	@$(SHELL) config.status --recheck

configure:configure.in
	@cd $(srcdir); autoconf

Makefile:Makefile.in config.status
	@$(SHELL) config.status

user/Makefile.obj:user/Makefile.obj.in config.status
	@$(SHELL) config.status

qq/Makefile:qq/Makefile.in config.status
	@$(SHELL) config.status

libu/Makefile:libu/Makefile.in config.status
	@$(SHELL) config.status

bkqed/Makefile:bkqed/Makefile.in config.status
	@$(SHELL) config.status

qdecay/Makefile:qdecay/Makefile.in config.status
	@$(SHELL) config.status

qcd/Makefile:qcd/Makefile.in config.status
	@$(SHELL) config.status

decay/Makefile:decay/Makefile.in config.status
	@$(SHELL) config.status

usrdum/Makefile:usrdum/Makefile.in config.status
	@$(SHELL) config.status

Makefile.qqlib:Makefile.qqlib.in config.status
	@$(SHELL) config.status

Makefile.noncleo:Makefile.noncleo.in config.status
	@$(SHELL) config.status

jetset/Makefile:jetset/Makefile.in config.status
	@$(SHELL) config.status

2phot/Makefile:2phot/Makefile.in config.status
	@$(SHELL) config.status

psirad/Makefile:psirad/Makefile.in config.status
	@$(SHELL) config.status

noncleo/Makefile:noncleo/Makefile.in config.status
	@$(SHELL) config.status

onlycleo/Makefile:onlycleo/Makefile.in config.status
	@$(SHELL) config.status

makefiles:Makefile user/Makefile.obj qq/Makefile libu/Makefile bkqed/Makefile qdecay/Makefile qcd/Makefile decay/Makefile usrdum/Makefile Makefile.qqlib Makefile.noncleo jetset/Makefile 2phot/Makefile psirad/Makefile noncleo/Makefile onlycleo/Makefile 
	@$(MAKE) depend




