<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>MCFast C++ Tracing</title>
</head>
<body bgcolor="#FFFFFF">
<h1>MCFast C++ Tracing</h1>

<UL>
<LI> <A HREF="#Introduction">Introduction</A>
<LI> <A HREF="#Design">Basic Design</A>
<LI> <A HREF="#Files">Files</A>
</UL>

<H2><A NAME="Introduction">Introduction</A></H2>
<HR>
<P>

<H2><A NAME="Basic Design">Basic Design</A></H2>
<HR>
<P>

<H2><A NAME="Files">Files in mcfast/src/tracing</A></H2>

<H3>Main Hook Routine</H3>
<PRE>
usr_before_trigger.cc
usr_before_trigger.hh
</PRE>
<P>

<H3>User Control Flags</H3>
<PRE>
tracingCPPFlags.inc    --compile time settings
UserSettings.cc        --mapping of run-time control flags
UserSettings.hh
</PRE>
<P>

<H3>Geometry Classes/ Planes and Volumes</H3>
<PRE>
Point.cc                     
Point.hh                     
Plane.cc                     
Plane.hh                     
Direction.cc                 
Direction.hh                 
Vector.cc
Vector.hh

Surface.cc                   
Surface.hh                   

RSurface.cc                  
RSurface.hh                  
XSurface.cc
XSurface.hh
YSurface.cc
YSurface.hh
ZCircularSurface.cc
ZCircularSurface.hh
ZRectangularSurface.cc
ZRectangularSurface.hh
ZSurface.cc
ZSurface.hh

RectPlane.cc                 
RectPlane.hh                 

Volume.cc
Volume.hh
AlignedBox.cc                
AlignedBox.hh                
Tube.cc                      
Tube.hh                      
</PRE>
<P>

<H3>Material</H3>
<PRE>
Material.cc                  
Material.hh                  

AssociatedMaterial.cc        
AssociatedMaterial.hh        
RealMaterial.cc              
RealMaterial.hh              

MaterialLookupTable.cc       
MaterialLookupTable.hh       
</PRE>
<P>

<H3>Media</H3>
<PRE>
Medium.cc                    
Medium.hh                    

RMedium.cc                   
RMedium.hh                   
ZMedium.cc
ZMedium.hh

DenseMedium.cc               
DenseMedium.hh               
DipoleYokeMedium.cc          
DipoleYokeMedium.hh          
TubeDenseMedium.cc           
TubeDenseMedium.hh

CompositeMedium.cc           
CompositeMedium.hh           

ProxyMedium.cc               
ProxyMedium.hh               
</PRE>
<P>

<H3>Detectors/Devices ("Behavior")</H3>
<PRE>
Detector.cc                  
Detector.hh

DetAbsorber.cc               
DetAbsorber.hh               
DetBarrelSiliconLayer.cc     
DetBarrelSiliconLayer.hh     
DetCalorimeter.cc            
DetCalorimeter.hh            
DetDriftChamberAnode.cc      
DetDriftChamberAnode.hh      
DetDriftChamberCathode.cc    
DetDriftChamberCathode.hh    
DetForwardDriftChamber.cc    
DetForwardDriftChamber.hh    
DetSiliconDiskLayer.cc       
DetSiliconDiskLayer.hh       
DetXYPixelPlane.cc           
DetXYPixelPlane.hh           

BFieldBoundary.cc            
BFieldBoundary.hh  
</PRE>
<P>

<H3>Utility</H3>
<PRE>
Printable.cc                 
Printable.hh                 
PrintableObject.cc           
PrintableObject.hh           
ProxyVisitor.cc              
ProxyVisitor.hh              
VolumeVisitor.hh
WorldFactory.cc
WorldFactory.hh
STL_FunctionObjects.hh       

fortranAccess.hh
functions.hh
fwd_map.hh
fwd_vector.hh

report.cc
report.hh

changeWTrack.hh
dummyVectorInstantiator.hh
</PRE>
<P>

<H3>Standalone Makefiles and c++ main</H3>
<PRE>
GNUmakefile                  
GNUmakefile_oldstyle         
main/main_args.cc
</PRE>
<P>

<H3>Tracing Algorithm</H3>
<PRE>
Trace.cc                     
Trace.hh                     
TraceType.cc                 
TraceType.hh                 

Traceable.cc                 
Traceable.hh                 

Tracer.cc                    
Tracer.hh                    

MediaTracer.cc               
MediaTracer.hh               

RMediaTracer.cc              
RMediaTracer.hh              
XMediaTracer.cc
XMediaTracer.hh
YMediaTracer.cc
YMediaTracer.hh
ZMediaTracer.cc
ZMediaTracer.hh
</PRE>
<P>

<H3>Particle</H3>
<PRE>
GenParticle.cc               
GenParticle.hh               
MCParticle.cc                
MCParticle.hh                
</PRE>
<P>

<H3>Fortran Access</H3>
(to avoid direct common-block -- c-structure mapping)
<PRE>
externFortran.hh

geo_trkorder.F
geo_trkorder_zsixy.F
getContIndexAndRatio.F
getDipoleInfo.F
getDipoleNum.F
getEMCalInfo.F
getEMCalNum.F
getEMCalResolution.F
getEMCalType.F
getFortranUserSettings.F
getInfoMaterial.F
getNContMaterials.F
getNameLength.F
getNameMaterial.F
getNumberOfMaterials.F
getRPlaneInfo.F
getRPlaneNum.F
getZPlaneInfo.F
getZPlaneNum.F
get_detector_dimensions.F
findBSilPlanePos.F
productionTime.F
</PRE>
<P>

<H3>Fortran Common Block Filling Routines</H3>
<PRE>
fillHepTraceCommons.F
fillTraceCommonInfo.cc
fillTraceCommonInfo.hh
fillTraceCommons.F
</PRE>
<P>

<H3>Sample C++ Access Routines</H3>
<PRE>
rob_TraceBField.F
rob_TraceGeometry.F
rob_TraceHit.F
rob_TraceHitIndex.F
rob_TraceInfo.F
rob_TraceWTrack.F
dummyKalmanLoop.cc
dummyKalmanLoop.hh
</PRE>
<P>

<H3>Official: Should Merge</H3>
<PRE>
wtk_dedx_loss_mkl.F 
wtk_mscat_dedx_mkl.F
wtk_mscat_mkl.F
mkl_trace_struct.hh      -- new trace structure c++
mkl_trace_struct.inc     -- new trace structure fortran
</PRE>
<P>

<H3>Official: Added Printing Messages</H3>
<PRE>
trk_offline.F
</PRE>
<P>

<H3>Should Become Official?</H3>
<PRE>
print_tracelist.F        (for debugging: print trace list)
</PRE>
<P>

<P><hr>
<address><a href="mailto:mkl@lns.cornell.edu/">Martin Lohner &lt;mkl@lns.cornell
.edu&gt;</a></address>
<!-- hhmts start -->
Last modified: Fri Jan 16 15:19:10 EST 1998
<!-- hhmts end -->
</body> </html>
