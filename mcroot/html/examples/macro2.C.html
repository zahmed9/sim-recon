<!DOCTYPE HTML PUBLIC "-// IETF/DTD HTML 2.0// EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Thu Jan  7 16:08:10 1999            -->
<!--                                             -->
<head>
<title>A simple histograming example</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, motif, windows nt, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<h1>A simple histograming example</h1>
<pre>
{
<b>//</b>
<b>// This is an example of a simple histograming macro</b>
<b>//</b>
/*
<a href= "macro2.gif" >
Here is the output </a>
*/
<b>//</b>
<b>//</b>
#include &lt;iostream.h&gt;

<a href="http://root.cern.ch/root/html/TSystem.html">gSystem</a>.<a href="http://root.cern.ch/root/html/TSystem.html#TSystem:Load">Load</a>("libTMCFast.so");

<a href="http://root.cern.ch/root/html/TFile.html">TFile</a> f("test.rdt");
<a href="http://root.cern.ch/root/html/TTree.html">TTree</a> *tree = (<a href="http://root.cern.ch/root/html/TTree.html">TTree</a>*)f.Get("T");

<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b1 = tree-&gt;GetBranch("hepevt");
<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b2 = tree-&gt;GetBranch("tof_trace");
<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b3 = tree-&gt;GetBranch("offtrk");

TMCFastHepEvt *hepevt=0;
TMCFastTOF *trace=0; 
TMCFastOfflineTrack *offtrk=0;  
hepevt = new TMCFastHepEvt();
trace = new TMCFastTOF();
offtrk = new TMCFastOfflineTrack();

b1-&gt;SetAddress(&amp;hepevt);
b2-&gt;SetAddress(&amp;trace);
b3-&gt;SetAddress(&amp;offtrk);

<b>// create some histograms</b>
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h1 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h1", "particle #1 Px",100,-1.0,1.0);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h2 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h2", "particle #2 Px",100,-1.0,1.0);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h3 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h3", "particle #3 Px",100,-1.0,1.0);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h4 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h4", "particle #4 Px",100,-1.0,1.0);

<b>// now create some pads to put the histo's</b>
<a href="http://root.cern.ch/root/html/TCanvas.html">TCanvas</a> *c1;
c1 = new <a href="http://root.cern.ch/root/html/TCanvas.html">TCanvas</a>("c1","The FillRandom example",200,10,700,900);
c1-&gt;SetFillColor(18);

<a href="http://root.cern.ch/root/html/TPad.html">TPad</a> *pad1,pad2,pad3,pad4;
pad1 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad1","The pad for particle #1",0.05,0.55,0.45,0.95,21);
pad2 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad2","The pad for particle #2",0.05,0.05,0.45,0.45,21);
pad3 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad3","The pad for particle #3",0.55,0.55,0.95,0.95,21);
pad4 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad4","The pad for particle #4",0.55,0.05,0.95,0.45,21);

pad1-&gt;Draw();
pad2-&gt;Draw();
pad3-&gt;Draw();
pad4-&gt;Draw();

<a href="../ListOfTypes.html#Int_t">Int_t</a> nentries = (<a href="../ListOfTypes.html#Int_t">Int_t</a>)tree-&gt;GetEntries();
cout&lt;&lt;"this data file has "&lt;&lt;nentries&lt;&lt;" events.n";

for (<a href="../ListOfTypes.html#Int_t">Int_t</a> ev = 1; ev &lt; nentries; ev++) {
  tree-&gt;GetEvent(ev);        //read  event in memory

<b>  // fill the histos</b>
  <a href="http://root.cern.ch/root/html/TIter.html">TIter</a> next(hepevt-&gt;GetHepParticles());
  TMCFastHepParticle *particle = (TMCFastHepParticle *)next();
  h1-&gt;Fill(particle-&gt;GetPx());
  particle = (TMCFastHepParticle *)next();
  h2-&gt;Fill(particle-&gt;GetPx());
  particle = (TMCFastHepParticle *)next();
  h3-&gt;Fill(particle-&gt;GetPx());
  particle = (TMCFastHepParticle *)next();
  h4-&gt;Fill(particle-&gt;GetPx());
   
   /*
  if(ev == 1){ 
  cout &lt;&lt; "nDumping one event:" &lt;&lt; endl ;
  cout &lt;&lt; "nhepevt-&gt;Dump()n";
  hepevt-&gt;Dump();
  cout &lt;&lt; "nparticle-&gt;Dump()n";
  particle-&gt;Dump();
  cout &lt;&lt; "ntrace-&gt;Dump()n";
  trace-&gt;Dump();
  cout &lt;&lt; "nofftrk-&gt;Dump()n";
  offtrk-&gt;Dump();
  }
  */

  hepevt-&gt;Clear();
  trace-&gt;Clear();
  offtrk-&gt;Clear();
}
<b>// draw the histos</b>
pad1-&gt;cd();
h1-&gt;Draw();
pad2-&gt;cd();
h2-&gt;Draw();
pad3-&gt;cd();
h3-&gt;Draw();
pad4-&gt;cd();
h4-&gt;Draw();

return 0;
}
</pre>

<!--SIGNATURE-->
<br>
<address>
<hr>
<center>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</center>
<hr>This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
