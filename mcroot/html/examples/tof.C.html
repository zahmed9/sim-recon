<!DOCTYPE HTML PUBLIC "-// IETF/DTD HTML 2.0// EN">
<html>
<!--                                             -->
<!-- Author: ROOT team (rootdev@hpsalo.cern.ch)  -->
<!--                                             -->
<!--   Date: Thu Jan 14 17:15:41 1999            -->
<!--                                             -->
<head>
<title>Time-Of-Flight Example</title>
<link rev=made href="mailto:rootdev@root.cern.ch">
<meta name="rating" content="General">
<meta name="objecttype" content="Manual">
<meta name="keywords" content="software development, oo, object oriented, unix, x11, motif, windows nt, c++, html, rene brun, fons rademakers">
<meta name="description" content="ROOT - An Object Oriented Framework For Large Scale Data Analysis.">
</head>
<body BGCOLOR="#ffffff" LINK="#0000ff" VLINK="#551a8b" ALINK="#ff0000" TEXT="#000000">
<a name="TopOfPage"></a>
<h1>Time-Of-Flight Example</h1>
<pre>
{
<b>//////////////////////////////////////////////////</b>
<b>// tof.C : Root Macro</b>
<b>//</b>
<b>//  Example of the Hall D Time-of-Flight</b>
<b>//</b>
<b>// The reaction gamma p -&gt; p K- K+ pi- pi+ was</b>
<b>// generated using "genr8" and processed through</b>
<b>// HDFast to create the data file test1.rdt </b>
<b>//  </b>
<b>//*-- Author :    Paul Eugenio 1-Jan-99</b>
<b>//*-- CMZ : PME 14-Jan-99</b>
<b>//////////////////////////////////////////////////</b>

<b>//</b>
<b>//</b>
/*
<a href= "smearedTOF.gif" >
Here is the output using smeared momentum in the calculation</a>
<a href= "tracedTOF.gif" >
Here is the output for using the trace point momentum   </a>

*/
<b>//</b>

<a href="http://root.cern.ch/root/html/TROOT.html">gROOT</a>-&gt;<a href="http://root.cern.ch/root/html/TROOT.html#TROOT:Reset">Reset</a>();
<a href="http://root.cern.ch/root/html/TSystem.html">gSystem</a>-&gt;<a href="http://root.cern.ch/root/html/TSystem.html#TSystem:Load">Load</a>("libTMCFast.so"); 

<b>// This file was generated by HDFast</b>
<a href="http://root.cern.ch/root/html/TFile.html">TFile</a> f("test1.rdt");

<a href="http://root.cern.ch/root/html/TTree.html">TTree</a> *tree = (<a href="http://root.cern.ch/root/html/TTree.html">TTree</a>*)f.Get("T");

<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b1 = tree-&gt;GetBranch("hepevt");
<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b2 = tree-&gt;GetBranch("tof_trace");
<a href="http://root.cern.ch/root/html/TBranch.html">TBranch</a> *b3 = tree-&gt;GetBranch("offtrk");

<a href=".././TMCFastHepEvt.html">TMCFastHepEvt</a> *hepevt;
<a href=".././TMCFastTOF.html">TMCFastTOF</a> *trace; 
<a href=".././TMCFastOfflineTrack.html">TMCFastOfflineTrack</a> *offtrk;  
hepevt = new <a href=".././TMCFastHepEvt.html">TMCFastHepEvt</a>();
trace = new <a href=".././TMCFastTOF.html">TMCFastTOF</a>();
offtrk = new <a href=".././TMCFastOfflineTrack.html">TMCFastOfflineTrack</a>();

b1-&gt;SetAddress(&amp;hepevt);
b2-&gt;SetAddress(&amp;trace);
b3-&gt;SetAddress(&amp;offtrk);

<b>// create some histograms and some place to put them</b>

<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h1 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h1", "CTOF mass kaon",100,0.1,0.8);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h2 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h2", "CTOF mass pion",100,0.0,0.5);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h3 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h3", "CTOF mass proton",100,0.2,1.2);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h4 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h4", "FTOF mass kaon",100,0.1,0.8);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h5 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h5", "FTOF mass pion",100,0.0,0.5);
<a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a> *h6 = new <a href="http://root.cern.ch/root/html/TH1F.html">TH1F</a>("h6", "FTOF mass proton",100,0.2,1.2);

<b>// now create some pads to put the histo's</b>
c1 = new <a href="http://root.cern.ch/root/html/TCanvas.html">TCanvas</a>("c1","Halld Time-of-Flight",100,10,700,900);
c1-&gt;SetFillColor(18);

pad1 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad1","The pad with the function",0.05,0.66,0.45,0.96,21);
pad2 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad2","The pad with the histogram",0.05,0.34,0.45,0.64,21);
pad3 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad3","The pad with the histogram",0.05,0.02,0.45,0.32,21);
pad4 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad4","The pad with the function",0.55,0.66,0.95,0.96,21);
pad5 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad5","The pad with the histogram",0.55,0.34,0.95,0.64,21);
pad6 = new <a href="http://root.cern.ch/root/html/TPad.html">TPad</a>("pad6","The pad with the histogram",0.55,0.02,0.95,0.32,21);

pad1-&gt;Draw();
pad2-&gt;Draw();
pad3-&gt;Draw();
pad4-&gt;Draw();
pad5-&gt;Draw();
pad6-&gt;Draw();

<a href="../ListOfTypes.html#Int_t">Int_t</a> nentries = (<a href="../ListOfTypes.html#Int_t">Int_t</a>)tree-&gt;GetEntries();

for (<a href="../ListOfTypes.html#Int_t">Int_t</a> ev = 0; ev &lt; nentries; ev++) {
  
  tree-&gt;GetEvent(ev);        //read  event in memory

    /**** Using the smeared momentum *
    h1-&gt;Fill(trace-&gt;CTOFmass(1,*offtrk));// kaon
    h1-&gt;Fill(trace-&gt;CTOFmass(4,*offtrk));// kaon
    h2-&gt;Fill(trace-&gt;CTOFmass(2,*offtrk));// pion
    h2-&gt;Fill(trace-&gt;CTOFmass(3,*offtrk));// pion
    h3-&gt;Fill(trace-&gt;CTOFmass(5,*offtrk));// proton
    h4-&gt;Fill(trace-&gt;FTOFmass(1,*offtrk));// kaon
    h4-&gt;Fill(trace-&gt;FTOFmass(4,*offtrk));// kaon
    h5-&gt;Fill(trace-&gt;FTOFmass(2,*offtrk));// pion
    h5-&gt;Fill(trace-&gt;FTOFmass(3,*offtrk));// pion
    h6-&gt;Fill(trace-&gt;FTOFmass(5,*offtrk));// proton
    *******/

  /******* Using the trace point momentum */
    h1-&gt;Fill(trace-&gt;CTOFmass(1));// kaon
    h1-&gt;Fill(trace-&gt;CTOFmass(4));// kaon
    h2-&gt;Fill(trace-&gt;CTOFmass(2));// pion
    h2-&gt;Fill(trace-&gt;CTOFmass(3));// pion
    h3-&gt;Fill(trace-&gt;CTOFmass(5));// proton
    h4-&gt;Fill(trace-&gt;FTOFmass(1));// kaon
    h4-&gt;Fill(trace-&gt;FTOFmass(4));// kaon
    h5-&gt;Fill(trace-&gt;FTOFmass(2));// pion
    h5-&gt;Fill(trace-&gt;FTOFmass(3));// pion
    h6-&gt;Fill(trace-&gt;FTOFmass(5));// proton
    /************/

  hepevt-&gt;Clear();
  trace-&gt;Clear();
  offtrk-&gt;Clear();
}

<b>// Now draw the histograms</b>
pad1-&gt;cd();
h1-&gt;Draw();
pad2-&gt;cd();
h2-&gt;Draw();
pad3-&gt;cd();
h3-&gt;Draw();
pad4-&gt;cd();
h4-&gt;Draw();
pad5-&gt;cd();
h5-&gt;Draw();
pad6-&gt;cd();
h6-&gt;Draw();
return 0;
}
</pre>

<!--SIGNATURE-->
<br>
<address>
<hr>
<center>
<a href="http://root.cern.ch/root/Welcome.html">ROOT page</a> - <a href="../ClassIndex.html">Class index</a> - <a href="#TopOfPage">Top of the page</a><br>
</center>
<hr>This page has been automatically generated. If you have any comments or suggestions about the page layout send a mail to <a href="mailto:rootdev@root.cern.ch">ROOT support</a>, or contact <a href="mailto:rootdev@root.cern.ch">the developers</a> with any questions or problems regarding ROOT.
</address>
</body>
</html>
